<!doctype html>
<html>
<head>
  <title>Submarine</title>
  <link rel="stylesheet" type="text/css" href="../static/css/style.css" />
  <link href='http://fonts.googleapis.com/css?family=Source+Sans+Pro:400,600,700' rel='stylesheet' type='text/css'>
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.5/styles/default.min.css">
  <link rel="stylesheet" href="../static/css/npm.css" />
</head>
<body>
  <div class="wrapper">

      <section class="content">
        <p><a href="index.html">table of contents</a></p>
      <h1 id="collaboration-change-logs-messages-and-repository-status">Collaboration: change logs, messages, and repository status</h1>
<p>dat isn&#39;t just about working by yourself—it&#39;s a collaborative platform. So let&#39;s try collaborating with dat.</p>
<p>First, let&#39;s make a cities.csv dataset with the following contents:</p>
<pre><code>cityId, name, region, country
12389720, Portland, Oregon, USA
41031233, San Francisco, California, USA
35682579, Copenhagen, Hovedstaden, Denmark
</code></pre><p>Now, let&#39;s import it into a new &quot;cities&quot; dat repository, but this time we can add a &quot;commit message.&quot; It&#39;s nice to add a message when you import data, so that other people (including your future self) can easily see what was changed with eac commit.</p>
<pre><code>dat import cities.csv -d cities -k cityId  -m &quot;Added cities dataset&quot;
</code></pre><h2 id="status">Status</h2>
<p>Now we have 3 rows, and a new dataset called &#39;cities&#39;. How can we check this? First, let&#39;s run:</p>
<pre><code>dat status
</code></pre><p>We can see what the current version is, how many datasets there are, how big the dat is, and when it was last updated.</p>
<h2 id="updating-data">Updating data</h2>
<p>Now, open the cities.csv file and add another row to the CSV data:</p>
<pre><code>20560012, Paris, Île-de-France, France
</code></pre><p>Then, import the new data with a message:</p>
<pre><code>dat import cities.csv -d cities -k cityId  -m &quot;Added Paris&quot;
</code></pre><p>After you import, you will see that 1 row was added, like <code>Wrote [+1, -0].</code>. If 4 rows were added (<code>+4</code>), that means you forgot to add the <code>--key=cityId</code>. It&#39;s important to specify your key!</p>
<h2 id="commit-log">Commit log</h2>
<p>To see what changed in your dat, type:</p>
<pre><code>dat log
</code></pre><p>You&#39;ll see a history of changes, including the version, the date changed, and any metadata stored in the message.</p>
<h2 id="go-to-another-version">Go to another version</h2>
<p>You can always change the dat repository (the entire repository, not just a dataset) to another version. Data is never deleted from dat. Instead, different views of the data are provided, depending on the version that you&#39;re looking at. Let&#39;s try interacting with an older version of the data.</p>
<p>In that output from <code>dat log</code>, look for the version of the first import. It&#39;s the very long string of letters and numbers that&#39;s preceded by <code>Version:</code>. (If you used a message, it will be the log entry with the message &quot;Added cities dataset.&quot;) Run the below command, using that version number in place of <code>&lt;version&gt;</code>:</p>
<pre><code>dat checkout &lt;version&gt;
</code></pre><p>If you run <code>dat status</code> and <code>dat export -d cities</code>, you should now see that the dat repository is at the same version it was when you first imported the cities dataset—Paris is missing.</p>
<p>Go back to the latest version of your repository with:</p>
<pre><code>dat checkout latest
</code></pre><p>And see what datasets currently exist with:</p>
<pre><code>dat datasets
</code></pre><h2 id="forks-branches-conflicts-">Forks, branches, conflicts?</h2>
<p>After checking out a dataset to a previous point in the past, you can still add more data. However, adding to a version that is not the latest creates a new &quot;fork&quot; in the dataset.</p>
<p>Although forks could be represented as conflicts to be merged immediately (as one might expect in a version control system such as Git), dat&#39;s philosophy is the opposite. We think that data tools should embrace forks as key support for experimentation during the scientific process. When a user pulls from a peer, forks will also be pulled so that each user has a complete picture of the graph.</p>

        <div class="navlinks">
          <a class="nextp button" href="04-working-with-files.html">OK, next! &raquo;</a>
            <a class="lastp navlink" href="02-tabular-datasets.html">&laquo; back</a>
        </div>
    </section>
  </div>
  <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.5/highlight.min.js"></script>
</body>
</html>
